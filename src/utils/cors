import cors from "cors";

function isAllowedOrigin(origin) {
  if (!origin) return true;

  try {
    const url = new URL(origin);
    const host = url.hostname;

    // allow same platform domains
    if (
      host.endsWith(".deployhub.online") ||
      host.endsWith(".deployhub.cloud") ||
      host.endsWith(".cloudcoderhub.in")
    ) {
      return true;
    }

    return false;
  } catch {
    return false;
  }
}

export { isAllowedOrigin };
